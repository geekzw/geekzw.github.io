<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>深入理解Handler | 逝去的美好</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="handler是发送消息和最终处理消息的类。从发送消息的方式看，有两种，一种是handler.post(Runnable)，另一种是handler.sendMessage()。">
<meta name="keywords" content="handler">
<meta property="og:type" content="article">
<meta property="og:title" content="深入理解Handler">
<meta property="og:url" content="http://yoursite.com/2016/11/01/深入理解Handler/index.html">
<meta property="og:site_name" content="逝去的美好">
<meta property="og:description" content="handler是发送消息和最终处理消息的类。从发送消息的方式看，有两种，一种是handler.post(Runnable)，另一种是handler.sendMessage()。">
<meta property="og:updated_time" content="2017-07-18T07:18:32.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="深入理解Handler">
<meta name="twitter:description" content="handler是发送消息和最终处理消息的类。从发送消息的方式看，有两种，一种是handler.post(Runnable)，另一种是handler.sendMessage()。">
  
    <link rel="alternate" href="/atom.xml" title="逝去的美好" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/plugin/bganimation/bg.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <div class="outer">
        <div class="widget-wrap mobile-header">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="http://ofy9dm2ii.bkt.clouddn.com/ez.jpeg">
    <h2 class="author">geekzw</h2>
    <h3 class="description">客户端的渣渣</h3>
    <div class="count-box">
      <a href="/archives"><div><strong>31</strong><br>文章</div></a>
      <a href="/categories"><div><strong>7</strong><br>分类</div></a>
      <a href="/tags"><div><strong>6</strong><br>标签</div></a>
    </div>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

        <section id="main"><article id="post-深入理解Handler" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/01/深入理解Handler/" class="article-date">
  <time class="post-time" datetime="2016-11-01T08:43:27.000Z" itemprop="datePublished">
    <span class="post-month">11月</span><br/>
    <span class="post-day">01</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      深入理解Handler
    </h1>
  

        <div>
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/android/">android</a>
  </div>

          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>handler是发送消息和最终处理消息的类。从发送消息的方式看，有两种，一种是handler.post(Runnable)，另一种是handler.sendMessage()。<br><a id="more"></a></p>
<h2 id="关联类"><a href="#关联类" class="headerlink" title="关联类"></a>关联类</h2><h3 id="Message"><a href="#Message" class="headerlink" title="Message"></a><font color="#47C4EA"><a href="https://geekzw.github.io/2016/11/01/Message/index.html" target="_blank" rel="external">Message</a></font></h3><h3 id="MessageQueue"><a href="#MessageQueue" class="headerlink" title="MessageQueue"></a><font color="#47C4EA"><a href="https://geekzw.github.io/2016/11/01/MessageQueue/index.html" target="_blank" rel="external">MessageQueue</a></font></h3><h3 id="Looper"><a href="#Looper" class="headerlink" title="Looper"></a><font color="#47C4EA"><a href="https://geekzw.github.io/2016/11/01/Looper/index.html" target="_blank" rel="external">Looper</a></font></h3><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>handler是发送消息和最终处理消息的类。从发送消息的方式看，有两种，一种是handler.post(Runnable)，另一种是handler.sendMessage()。</p>
<h2 id="handler流程解析"><a href="#handler流程解析" class="headerlink" title="handler流程解析"></a>handler流程解析</h2><h3 id="handler-post-方式"><a href="#handler-post-方式" class="headerlink" title="handler.post()方式"></a>handler.post()方式</h3><p>handler.post()接受一个Runnable对象，run方法中的代码执行在UI线程也就是主线程。跟进post方法可以发现，其实还是把Runnable通过getPostMessage方法包装成一个Message对象，其中Runnable实例赋值给Message对象的callback成员变量。最后调用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">sendMessageAtTime</span><span class="params">(Message msg, <span class="keyword">long</span> uptimeMillis)</span> </span>&#123;</div><div class="line">        MessageQueue queue = mQueue;</div><div class="line">        <span class="keyword">if</span> (queue == <span class="keyword">null</span>) &#123;</div><div class="line">            RuntimeException e = <span class="keyword">new</span> RuntimeException(</div><div class="line">                    <span class="keyword">this</span> + <span class="string">" sendMessageAtTime() called with no mQueue"</span>);</div><div class="line">            Log.w(<span class="string">"Looper"</span>, e.getMessage(), e);</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> enqueueMessage(queue, msg, uptimeMillis);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>这个方法很简单，就是对与handler绑定的msgqueue判空，不为空则把当前包装了Runnable的msg放入messageQueue。此处调用的enqueueMessage(queue, msg, uptimeMillis);在<font color="#47C4EA"><a href="https://geekzw.github.io/2016/11/01/MessageQueue/index.html" target="_blank" rel="external">MessageQueue</a></font>类中有详细解释至此，算是把一个Runnable对象放入了消息队列中，那么什么时候会执行这个Runnable呢？那就要看<font color="#47C4EA"><a href="https://geekzw.github.io/2016/11/01/Looper/index.html" target="_blank" rel="external">Looper</a></font>类了，我们知道，Looper类的主要作用就是从消息队列中取出消息，最后发送给目标handler。我们在分析Looper类的时候，分析过一个loop（）方法，它就是用来循环取出消息队列中的消息的方法，其中当取出一个有效的消息后，会执行msg.target.dispatchMessage(msg);这行代码。msg当然就是Message的一个实例，在<font color="#47C4EA"><a href="https://geekzw.github.io/2016/11/01/Message/index.html" target="_blank" rel="external">Message</a></font>类中，我们知道有一个target的成员变量，作用是保存这个消息最终到达的handler的实例。那么这行代码调用的就是handler.dispatchMessage()这个方法。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dispatchMessage</span><span class="params">(Message msg)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (msg.callback != <span class="keyword">null</span>) &#123;</div><div class="line">            handleCallback(msg);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">if</span> (mCallback != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">if</span> (mCallback.handleMessage(msg)) &#123;</div><div class="line">                    <span class="keyword">return</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            handleMessage(msg);</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>看到这里，终于是看到了我们最初post的那个Runnable对象了，它其实就是msg.callback。当它不位空的时候调用handleCallback(msg)这个方法更是简单，就一行代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">handleCallback</span><span class="params">(Message message)</span> </span>&#123;</div><div class="line">        message.callback.run();</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>看到这里就恍然大悟，为什么post的Runnable对象，run里面的代码是跑在UI线程的了。因为就是在UI线程中在一个合适的时间把run方法当做一个普通方法调用了，没有把它放入一个Thread中当做子线程处理。这里容易理解错是因为我们平时使用Runnable都是放入一个子线程中执行，不会手动调用run方法。平时开发中，使用postDelayed比较多，用于延时执行一段代码。</p>
<h3 id="handler-sendMessage-方式"><a href="#handler-sendMessage-方式" class="headerlink" title="handler.sendMessage()方式"></a>handler.sendMessage()方式</h3><p>sendMsg方法有很多重载，但是都不难理解，只是指定的参数不一样，有些参数不想系统默认。如果调用的sendMessage（）不是message实例，则系统会调用Message.obtain获取一个消息，来包装传入的参数，obtain方法在Message中有详细分析。后面流程与post方式一致，压入消息列表，loop循环取出，调用msg.target.dispatchMessage(msg);这次callback为空。则走else流程。首先判断mCallback是否为空。Callback是一个接口，里面就一个handleMessage(msg)方法，handler中的Callback是我们平时经常用的标准的回调模式。如果mCallback不为空，则回调handleMessage，否则调用handleMessage，sdk对这个方法的注释说，子类必须重写这个方法，用来处理接受到的消息。</p>
<h3 id="对handler机制的一个疑问"><a href="#对handler机制的一个疑问" class="headerlink" title="对handler机制的一个疑问"></a>对handler机制的一个疑问</h3><p>当app启动的时候，会执行ActivityThread类中的main方法。main方法代码如下<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, <span class="string">"ActivityThreadMain"</span>);</div><div class="line">        SamplingProfilerIntegration.start();</div><div class="line"></div><div class="line">        <span class="comment">// CloseGuard defaults to true and can be quite spammy.  We</span></div><div class="line">        <span class="comment">// disable it here, but selectively enable it later (via</span></div><div class="line">        <span class="comment">// StrictMode) on debug builds, but using DropBox, not logs.</span></div><div class="line">        CloseGuard.setEnabled(<span class="keyword">false</span>);</div><div class="line"></div><div class="line">        Environment.initForCurrentUser();</div><div class="line"></div><div class="line">        <span class="comment">// Set the reporter for event logging in libcore</span></div><div class="line">        EventLogger.setReporter(<span class="keyword">new</span> EventLoggingReporter());</div><div class="line"></div><div class="line">        <span class="comment">// Make sure TrustedCertificateStore looks in the right place for CA certificates</span></div><div class="line">        <span class="keyword">final</span> File configDir = Environment.getUserConfigDirectory(UserHandle.myUserId());</div><div class="line">        TrustedCertificateStore.setDefaultUserDirectory(configDir);</div><div class="line"></div><div class="line">        Process.setArgV0(<span class="string">"&lt;pre-initialized&gt;"</span>);</div><div class="line"></div><div class="line">        Looper.prepareMainLooper();</div><div class="line"></div><div class="line">        ActivityThread thread = <span class="keyword">new</span> ActivityThread();</div><div class="line">        thread.attach(<span class="keyword">false</span>);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (sMainThreadHandler == <span class="keyword">null</span>) &#123;</div><div class="line">            sMainThreadHandler = thread.getHandler();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (<span class="keyword">false</span>) &#123;</div><div class="line">            Looper.myLooper().setMessageLogging(<span class="keyword">new</span></div><div class="line">                    LogPrinter(Log.DEBUG, <span class="string">"ActivityThread"</span>));</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// End of event ActivityThreadMain.</span></div><div class="line">        Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER);</div><div class="line">        Looper.loop();</div><div class="line"></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Main thread loop unexpectedly exited"</span>);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>我们只关心跟handler有关的代码，其实主要也就是创建looper和handler。21行可以看到调用了Looper.prepareMainLooper();这个方法在Looper类分析中有做解释。就是创建一个mainLooper。接着创建一个sMainThreadHandler，然后调用Looper.loop();这是标准的在一个线程中创建handler的方式，我们自己使用的时候，也应该这么创建。看到这里我就有疑问了。主线程中调用了loop方法，我们都知道，loop方法里面是一个无限循环，并且带阻塞的。那为什么app还能继续执行，并没有因此而阻塞在这里。后来发现，原来我对app的运行流程一直理解有误。app大部分时间确实是处于阻塞状态。现在我们来想一想，线程是什么东西。线程的作用就是执行一块代码，当代码运行完了，它也就结束了。但是想想我们的app，它可是可以长期运行，不会因为线程执行结束而死掉的。那我们平时要想让一个线程一直运行下去，做法是什么呢？就是在线程中写个死循环。这么一想，也算是大致理解了mainLooper这个东西。当创建了mainLooper之后，它就会进入死循环不断的从MessageQueue中取消息，那么在app启动过程中，系统会系统还会创建必要的服务进程，这些进程会通过binder发送给主线程事件，比如aty的create start等等。这时我们可以看一下MainThreadHandler这个东西了。MainThreadHandler类型为H，就是ActivityThread的内部类，重写handMessage方法<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleMessage</span><span class="params">(Message msg)</span> </span>&#123;</div><div class="line">            <span class="keyword">if</span> (DEBUG_MESSAGES) Slog.v(TAG, <span class="string">"&gt;&gt;&gt; handling: "</span> + codeToString(msg.what));</div><div class="line">            <span class="keyword">switch</span> (msg.what) &#123;</div><div class="line">                <span class="keyword">case</span> LAUNCH_ACTIVITY: &#123;</div><div class="line">                    Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, <span class="string">"activityStart"</span>);</div><div class="line">                    <span class="keyword">final</span> ActivityClientRecord r = (ActivityClientRecord) msg.obj;</div><div class="line"></div><div class="line">                    r.packageInfo = getPackageInfoNoCheck(</div><div class="line">                            r.activityInfo.applicationInfo, r.compatInfo);</div><div class="line">                    handleLaunchActivity(r, <span class="keyword">null</span>, <span class="string">"LAUNCH_ACTIVITY"</span>);</div><div class="line">                    Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER);</div><div class="line">                &#125; <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> RELAUNCH_ACTIVITY: &#123;</div><div class="line">                    Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, <span class="string">"activityRestart"</span>);</div><div class="line">                    ActivityClientRecord r = (ActivityClientRecord)msg.obj;</div><div class="line">                    handleRelaunchActivity(r);</div><div class="line">                    Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER);</div><div class="line">                &#125; <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> PAUSE_ACTIVITY: &#123;</div><div class="line">                    Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, <span class="string">"activityPause"</span>);</div><div class="line">                    SomeArgs args = (SomeArgs) msg.obj;</div><div class="line">                    handlePauseActivity((IBinder) args.arg1, <span class="keyword">false</span>,</div><div class="line">                            (args.argi1 &amp; USER_LEAVING) != <span class="number">0</span>, args.argi2,</div><div class="line">                            (args.argi1 &amp; DONT_REPORT) != <span class="number">0</span>, args.argi3);</div><div class="line">                    maybeSnapshot();</div><div class="line">                    Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER);</div><div class="line">                &#125; <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> PAUSE_ACTIVITY_FINISHING: &#123;</div><div class="line">                    Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, <span class="string">"activityPause"</span>);</div><div class="line">                    SomeArgs args = (SomeArgs) msg.obj;</div><div class="line">                    handlePauseActivity((IBinder) args.arg1, <span class="keyword">true</span>, (args.argi1 &amp; USER_LEAVING) != <span class="number">0</span>,</div><div class="line">                            args.argi2, (args.argi1 &amp; DONT_REPORT) != <span class="number">0</span>, args.argi3);</div><div class="line">                    Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER);</div><div class="line">                &#125; <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> STOP_ACTIVITY_SHOW: &#123;</div><div class="line">                    Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, <span class="string">"activityStop"</span>);</div><div class="line">                    SomeArgs args = (SomeArgs) msg.obj;</div><div class="line">                    handleStopActivity((IBinder) args.arg1, <span class="keyword">true</span>, args.argi2, args.argi3);</div><div class="line">                    Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER);</div><div class="line">                &#125; <span class="keyword">break</span>;</div></pre></td></tr></table></figure></p>
<p>代码过多，不全部贴出来了。从这个方法中可以看出来了。系统发的消息都在这里处理了，比如app启动，重启等消息。app的启动和运行就是不停的执行各种消息的过程，当暂时没有消息的时候，app就会阻塞在当前状态。这个时候还有一个疑问，一旦创建了mainLooper，调用了loop方法，主线程就处于无限循环和阻塞状态，理论上着会占用很大的cup。但是实际上，当前没有可取的消息的时候，线程将会被挂起。再有消息到来的时候再唤醒，这个流程采用的是epllo模式，这个模式在分析MessageQueue的时候有做解释。</p>
<h3 id="使用handler需要注意的地方"><a href="#使用handler需要注意的地方" class="headerlink" title="使用handler需要注意的地方"></a>使用handler需要注意的地方</h3><p>1、从looper的源码中可以知道，每个线程只能有一个looper，也就是不能在同一个线程中多次调用prepare方法。<br>2、在子线程中使用handler，要按Looper.prepare,new handler,looper.loop顺序调用，其中原理已经分析过了<br>3、使用handler时要注意内存泄露。当消息队列中还有待处理的消息时，如果aty被销毁，因为消息中持有aty实例，导致内存泄露。此时我们可以采用静态内部类+对aty的弱引用解决。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/01/深入理解Handler/" data-id="cj5clekdg002jz4x38xwv79it" class="article-share-link">分享</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/handler/">handler</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/11/01/剑指offer-从尾到头打印链表/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">上一篇</strong>
      <div class="article-nav-title">
        
          剑指offer_从尾到头打印链表
        
      </div>
    </a>
  
  
    <a href="/2016/11/01/Looper/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">下一篇</strong>
      <div class="article-nav-title">Looper</div>
    </a>
  
</nav>

  
</article>



</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <h1 class="blog-title">逝去的美好</h1>
    <h2 class="blog-subtitle">无论做什么，兴趣还是最重要的</h2>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="http://ofy9dm2ii.bkt.clouddn.com/ez.jpeg">
    <h2 class="author">geekzw</h2>
    <h3 class="description">客户端的渣渣</h3>
    <div class="count-box">
      <a href="/archives"><div><strong>31</strong><br>文章</div></a>
      <a href="/categories"><div><strong>7</strong><br>分类</div></a>
      <a href="/tags"><div><strong>6</strong><br>标签</div></a>
    </div>



    <div class="social-link">
      
        <a class="hvr-bounce-in" href="https://github.com/geekzw" target="_blank" title="Github">
          Github
        </a>
      
    </div>

    <div class="friend-link">
      <h2>友情链接</h2>
      
        <a class="hvr-bounce-in" href="http://blog.shanamaid.top/" target="_blank" title="ShanaMaid">
          ShanaMaid
        </a>
      
    </div>
  </div>
</div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy;2016 - 2017 geekzw<br>
      由<a href="http://hexo.io/" target="_blank">Hexo</a>强力驱动 | 
      主题-<a href="https://github.com/ShanaMaid/hexo-theme-shana">Shana</a>
      
    </div>
    
  </div>
</footer>
    </div>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//apps.bdimg.com/libs/wow/0.1.6/wow.min.js"></script>
<script>
new WOW().init();
</script>   


  <link rel="stylesheet" href="/plugin/fancybox/jquery.fancybox.css">
  <script src="/plugin/fancybox/jquery.fancybox.pack.js"></script>



  <link rel="stylesheet" href="/plugin/galmenu/GalMenu.css">
  <script src="/plugin/galmenu/GalMenu.js"></script>
  <div class="GalMenu GalDropDown">
      <div class="circle" id="gal">
        <div class="ring">
          
            <a href="/" title="" class="menuItem">首页</a>
          
            <a href="/tags" title="" class="menuItem">标签</a>
          
            <a href="/categories" title="" class="menuItem">分类</a>
          
            <a href="/archives" title="" class="menuItem">归档</a>
          
            <a href="/xxxxxxxxx" title="" class="menuItem">xxx</a>
          
            <a href="/xxxxxxx" title="" class="menuItem">xxxx</a>
          
        </div>
        
          <audio id="audio" src="#"></audio>
        
      </div> 
</div>
<div id="overlay" style="opacity: 1; cursor: pointer;"></div>
  <script type="text/javascript">var items = document.querySelectorAll('.menuItem');
    for (var i = 0,
    l = items.length; i < l; i++) {
      items[i].style.left = (50 - 35 * Math.cos( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%";
      items[i].style.top = (50 + 35 * Math.sin( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%"
    }</script>
<script type="text/javascript">
  $(document).ready(function() {
    $('body').GalMenu({
      'menu': 'GalDropDown'
    })
  });
</script>

  <section class="hidden-xs"> 
  <ul class="cb-slideshow"> 
    <li><span>苟利</span></li> 
    <li><span>国家</span></li> 
    <li><span>生死以</span></li> 
    <li><span>岂能</span></li> 
    <li><span>祸福</span></li> 
    <li><span>趋避之</span></li> 
  </ul>
</section>
<script src="/js/script.js"></script>



  </div>
</body>
</html>